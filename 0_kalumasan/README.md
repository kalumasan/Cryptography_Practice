## 个人总结技术报告

### 主要贡献
- 负责项目总体实现及规划项目结构
- 完成《基于网页的用户注册与登录系统》所有要求中基础架构和基础实现（后端）
- 完成《基于网页的文件上传加密与数字签名系统》所有要求（后端）
- 完成《基于网页的加密文件下载与解密》所有要求（后端）
#### 项目总体实现及规划项目结构
- 主要参考了[数字内容安全应用实践](https://github.com/anjingcuc/learn_flask_the_hard_way/blob/master/0x09_finished)的结构作为项目基础结构，而功能实现的代码基本参考[ Python 版实现的课程系统半成品源代码 ](https://github.com/TheMasterOfMagic/ac)
- 由于我们最开始是想从零开发，但是我们基本上都是从零学起，所以在我们自己创建的项目上pr了多次后才发觉到已经用了大量的示例代码了，还请老师原谅我们的粗心，没有及时选择fork。


### 技术方面工作
- 设计并实现`注册`功能
- 设计并实现`安全的忘记口令 / 找回密码`功能
- 设计并实现`下载URL设置有效期（限制时间或限制下载次数），过期后禁止访问`功能
- 实现`对于持有加密后的对称密钥的匿名用户，实现客户端对下载后的文件可以解密还原到原始文件`功能

#### `注册`功能开发回顾
- 由于对网页开发方面几乎是零经验，所以最初是通过通读安老师小学期给出的示例代码([数字内容安全应用实践](https://github.com/anjingcuc/learn_flask_the_hard_way/blob/master/0x09_finished))初步了解前后端工作模式，并且重点阅读了后端的代码，然后以较为简单的注册功能的实现作为练手，初步了解了后端的工作模式，前后端应该如何连接，以及flask这个web框架模式。
  ![注册页面](img/register.png)


#### `安全的忘记口令 / 找回密码`功能开发回顾
##### 设计思路
- 首先就是如何验证用户是本人，从而实现`安全地`这个要求，在这里我选择的是使用`邮箱验证`，也就是通过向用户注册时使用的邮箱发送验证码，然后用户通过提交验证码来证明身份，然后客户端提供重设密码的功能
##### 遇到的问题以及解决方案
- Q1.**配置 Flask-Mail 的内容应该如何兼容到现有的框架下？**
- 问题描述：由于我们是继承了[数字内容安全应用实践](https://github.com/anjingcuc/learn_flask_the_hard_way/blob/master/0x09_finished)的架构，所以如何修改架构并配置Flask-Mail以及初始化app实例后能正确传到路由中并使用成了一个问题
- 问题解决过程：再最初的时候，我直接在`application.py`中配置，并且试图直接通过`from app.application import flask_app`将其导入所使用的路由中，然后在路由所在的`views.py`文件中再通过`Mail(flask_app)`初始化邮箱设置，但是这么做会报错`循环导入（circular import）`。所以我转而选择在`application.py`中直接初始化
- ```python
    # 初始化 Flask-Mail
    mail = Mail(flask_app)

    # 添加 Flask-Mail 作为扩展到 Flask 应用中
    flask_app.extensions['mail'] = mail
  ```